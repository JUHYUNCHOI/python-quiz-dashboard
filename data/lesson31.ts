// ============================================
// ë ˆìŠ¨ 31: í•¨ìˆ˜ í™œìš©
// Part 5: í•¨ìˆ˜ - ê¸°ì´ˆ
// ============================================

import { LessonData } from './types'

export const lesson31Data: LessonData = {
  id: "31",
  title: "í•¨ìˆ˜ í™œìš©",
  emoji: "âš¡",
  description: "ì§€ì—­ë³€ìˆ˜, ì „ì—­ë³€ìˆ˜, ëŒë‹¤ í•¨ìˆ˜ë¥¼ ë°°ì›Œìš”!",
  chapters: [
    // ============================================
    // Chapter 1: ì§€ì—­ë³€ìˆ˜ vs ì „ì—­ë³€ìˆ˜
    // ============================================
    {
      id: "ch1",
      title: "ì§€ì—­ë³€ìˆ˜ vs ì „ì—­ë³€ìˆ˜",
      emoji: "ğŸ ",
      steps: [
        {
          id: "ch1-1",
          type: "explain",
          title: "ë³€ìˆ˜ì˜ ë²”ìœ„",
          content: `## ğŸ¤” ìƒê°í•´ë³´ê¸°

í•¨ìˆ˜ ì•ˆì—ì„œ ë§Œë“  ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ ë°–ì—ì„œ ì“¸ ìˆ˜ ìˆì„ê¹Œìš”?

**ì‰½ê²Œ ìƒê°í•˜ë©´:**
- **ì „ì—­ë³€ìˆ˜** = ì§‘ ê±°ì‹¤ì— ìˆëŠ” ë¬¼ê±´ (ê°€ì¡± ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥)
- **ì§€ì—­ë³€ìˆ˜** = ë‚´ ë°©ì— ìˆëŠ” ë¬¼ê±´ (ë‚˜ë§Œ ì‚¬ìš© ê°€ëŠ¥)`
        },
        {
          id: "ch1-2",
          type: "explain",
          title: "ì§€ì—­ë³€ìˆ˜ (Local Variable)",
          content: `## ğŸšª ì§€ì—­ë³€ìˆ˜: í•¨ìˆ˜ ì•ˆì—ì„œë§Œ!

\`\`\`python
def í•¨ìˆ˜():
    x = 10    # ì§€ì—­ë³€ìˆ˜
    print(x)  # 10 - í•¨ìˆ˜ ì•ˆì—ì„œëŠ” OK

í•¨ìˆ˜()
print(x)      # âŒ ì—ëŸ¬! í•¨ìˆ˜ ë°–ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€
\`\`\`

í•¨ìˆ˜ê°€ ëë‚˜ë©´ ì§€ì—­ë³€ìˆ˜ëŠ” ì‚¬ë¼ì ¸ìš”!`
        },
        {
          id: "ch1-3",
          type: "explain",
          title: "ì „ì—­ë³€ìˆ˜ (Global Variable)",
          content: `## ğŸŒ ì „ì—­ë³€ìˆ˜: ì–´ë””ì„œë“  ì½ê¸° OK!

\`\`\`python
x = 10        # ì „ì—­ë³€ìˆ˜

def í•¨ìˆ˜():
    print(x)  # 10 - í•¨ìˆ˜ ì•ˆì—ì„œë„ ì½ê¸° OK

í•¨ìˆ˜()
print(x)      # 10 - í•¨ìˆ˜ ë°–ì—ì„œë„ OK
\`\`\`

ì „ì—­ë³€ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ ì–´ë””ì„œë“  **ì½ì„ ìˆ˜** ìˆì–´ìš”!`
        },
        {
          id: "ch1-4",
          type: "quiz",
          title: "ì§€ì—­ë³€ìˆ˜ vs ì „ì—­ë³€ìˆ˜",
          content: `ë‹¤ìŒ ì½”ë“œì˜ ì¶œë ¥ ê²°ê³¼ëŠ”?
\`\`\`python
x = 5

def í•¨ìˆ˜():
    x = 10
    print(x)

í•¨ìˆ˜()
print(x)
\`\`\``,
          options: [
            "10\n10",
            "5\n5",
            "10\n5",
            "5\n10"
          ],
          answer: 2,
          explanation: "í•¨ìˆ˜ ì•ˆì˜ xëŠ” ì§€ì—­ë³€ìˆ˜(10), ë°”ê¹¥ì˜ xëŠ” ì „ì—­ë³€ìˆ˜(5)! ì„œë¡œ ë‹¤ë¥¸ ë³€ìˆ˜ì˜ˆìš”."
        },
        {
          id: "ch1-5",
          type: "tryit",
          title: "ì§ì ‘ í™•ì¸í•˜ê¸°",
          task: "ì§€ì—­ë³€ìˆ˜ì™€ ì „ì—­ë³€ìˆ˜ì˜ ì°¨ì´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”",
          initialCode: `x = 5        # ì „ì—­ë³€ìˆ˜

def í•¨ìˆ˜():
    x = 10   # ì§€ì—­ë³€ìˆ˜ (ìƒˆë¡œ ë§Œë“¤ì–´ì§!)
    print(f'í•¨ìˆ˜ ì•ˆ: {x}')

í•¨ìˆ˜()
print(f'í•¨ìˆ˜ ë°–: {x}')`,
          expectedOutput: "í•¨ìˆ˜ ì•ˆ: 10\ní•¨ìˆ˜ ë°–: 5",
          hint: "í•¨ìˆ˜ ì•ˆì˜ x = 10ì€ ìƒˆë¡œìš´ ì§€ì—­ë³€ìˆ˜ì˜ˆìš”"
        },
        {
          id: "ch1-6",
          type: "explain",
          title: "globalë¡œ ì „ì—­ë³€ìˆ˜ ìˆ˜ì •",
          content: `## âš ï¸ í•¨ìˆ˜ ì•ˆì—ì„œ ì „ì—­ë³€ìˆ˜ ìˆ˜ì •í•˜ê¸°

\`\`\`python
x = 10

def í•¨ìˆ˜():
    global x    # ì „ì—­ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ê² ë‹¤!
    x = 20

í•¨ìˆ˜()
print(x)    # 20
\`\`\`

ğŸš¨ **ì£¼ì˜!** \`global\`ì€ ê°€ê¸‰ì  ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”!
ì½”ë“œê°€ ë³µì¡í•´ì ¸ìš”. ëŒ€ì‹  \`return\`ì„ ì‚¬ìš©í•˜ì„¸ìš”.`
        }
      ]
    },
    // ============================================
    // Chapter 2: ëŒë‹¤ í•¨ìˆ˜
    // ============================================
    {
      id: "ch2",
      title: "ëŒë‹¤ í•¨ìˆ˜ (Lambda)",
      emoji: "âš¡",
      steps: [
        {
          id: "ch2-1",
          type: "explain",
          title: "ëŒë‹¤ë€?",
          content: `## âš¡ í•œ ì¤„ í•¨ìˆ˜!

ê°„ë‹¨í•œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ë ¤ê³  í•˜ëŠ”ë°, defë¡œ 3ì¤„ ì“°ê¸°ê°€ ê·€ì°®ì•„ìš”.
í•œ ì¤„ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œìš”?

**ëŒë‹¤ = í•œ ì¤„ í•¨ìˆ˜!**

\`\`\`python
# ì¼ë°˜ í•¨ìˆ˜ (3ì¤„)
def ë”í•˜ê¸°(a, b):
    return a + b

# ëŒë‹¤ í•¨ìˆ˜ (1ì¤„)
ë”í•˜ê¸°2 = lambda a, b: a + b

# ë‘˜ ë‹¤ ê°™ì€ ê²°ê³¼!
print(ë”í•˜ê¸°(3, 5))     # 8
print(ë”í•˜ê¸°2(3, 5))    # 8
\`\`\``
        },
        {
          id: "ch2-2",
          type: "explain",
          title: "ëŒë‹¤ ê¸°ë³¸ í˜•íƒœ",
          content: `## ğŸ“ ëŒë‹¤ ë¬¸ë²•

\`\`\`python
lambda ë§¤ê°œë³€ìˆ˜: ë°˜í™˜ê°’
\`\`\`

- \`def\`ë‚˜ \`return\` ì—†ì´ í•œ ì¤„ë¡œ!
- ê°„ë‹¨í•œ ê³„ì‚°ì— ìœ ìš©

**ì˜ˆì‹œ:**
\`\`\`python
ì œê³± = lambda x: x ** 2
print(ì œê³±(5))    # 25

í™€ìˆ˜ = lambda x: x % 2 == 1
print(í™€ìˆ˜(7))    # True
\`\`\``
        },
        {
          id: "ch2-3",
          type: "tryit",
          title: "ëŒë‹¤ í•¨ìˆ˜ ë§Œë“¤ê¸°",
          task: "ëŒë‹¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ë³´ì„¸ìš”",
          initialCode: `# ì œê³± í•¨ìˆ˜
ì œê³± = lambda x: x ** 2
print(ì œê³±(5))

# í™€ìˆ˜ íŒë³„
í™€ìˆ˜ = lambda x: x % 2 == 1
print(í™€ìˆ˜(7))
print(í™€ìˆ˜(4))`,
          expectedOutput: "25\nTrue\nFalse",
          hint: "5Â² = 25, 7ì€ í™€ìˆ˜(True), 4ëŠ” ì§ìˆ˜(False)"
        },
        {
          id: "ch2-4",
          type: "quiz",
          title: "ëŒë‹¤ ì´í•´í•˜ê¸°",
          content: `ë‹¤ìŒ ì½”ë“œì˜ ì¶œë ¥ ê²°ê³¼ëŠ”?
\`\`\`python
double = lambda x: x * 2
print(double(7))
\`\`\``,
          options: [
            "7",
            "14",
            "72",
            "ì—ëŸ¬ ë°œìƒ"
          ],
          answer: 1,
          explanation: "lambda x: x * 2ëŠ” xë¥¼ 2ë°°ë¡œ ë§Œë“¤ì–´ìš”. 7 Ã— 2 = 14"
        },
        {
          id: "ch2-5",
          type: "mission",
          title: "ëŒë‹¤ë¡œ 3ë°° í•¨ìˆ˜",
          task: "ìˆ«ìë¥¼ 3ë°°ë¡œ ë§Œë“œëŠ” ëŒë‹¤ í•¨ìˆ˜ tripleì„ ì™„ì„±í•˜ì„¸ìš”",
          initialCode: `triple = lambda x: # ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±

print(triple(5))
print(triple(10))`,
          expectedOutput: "15\n30",
          hint: "xë¥¼ 3ë°°ë¡œ ë§Œë“œë ¤ë©´?",
          hint2: "ê³±í•˜ê¸° ì—°ì‚°ì *ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”"
        }
      ]
    },
    // ============================================
    // Chapter 3: sorted()ì™€ ëŒë‹¤
    // ============================================
    {
      id: "ch3",
      title: "sorted()ì™€ ëŒë‹¤ í™œìš©",
      emoji: "ğŸ“Š",
      steps: [
        {
          id: "ch3-1",
          type: "explain",
          title: "ëŒë‹¤ì˜ ì§„ì§œ í™œìš©!",
          content: `## â­ sorted()ì™€ ëŒë‹¤ ì¡°í•©!

ëŒë‹¤ëŠ” \`sorted()\`ì™€ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ì§„ê°€ë¥¼ ë°œíœ˜í•´ìš”!

\`\`\`python
í•™ìƒë“¤ = [('ì² ìˆ˜', 85), ('ì˜í¬', 92), ('ë¯¼ìˆ˜', 78)]

# ì ìˆ˜ ê¸°ì¤€ ì •ë ¬
ì •ë ¬ë¨ = sorted(í•™ìƒë“¤, key=lambda x: x[1])
print(ì •ë ¬ë¨)
# [('ë¯¼ìˆ˜', 78), ('ì² ìˆ˜', 85), ('ì˜í¬', 92)]
\`\`\`

ğŸ’¡ **Level 2 ê¸°ì¶œ!** \`sorted()\`ì™€ \`lambda\`ì˜ ì¡°í•©ì´ ìì£¼ ë‚˜ì™€ìš”!`
        },
        {
          id: "ch3-2",
          type: "tryit",
          title: "ì ìˆ˜ ê¸°ì¤€ ì •ë ¬",
          task: "í•™ìƒë“¤ì„ ì ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•´ë³´ì„¸ìš”",
          initialCode: `í•™ìƒë“¤ = [('ì² ìˆ˜', 85), ('ì˜í¬', 92), ('ë¯¼ìˆ˜', 78)]

# ì ìˆ˜(x[1]) ê¸°ì¤€ ì •ë ¬
ì •ë ¬ë¨ = sorted(í•™ìƒë“¤, key=lambda x: x[1])
print(ì •ë ¬ë¨)`,
          expectedOutput: "[('ë¯¼ìˆ˜', 78), ('ì² ìˆ˜', 85), ('ì˜í¬', 92)]",
          hint: "x[1]ì€ ê° íŠœí”Œì˜ ë‘ ë²ˆì§¸ ìš”ì†Œ(ì ìˆ˜)ì˜ˆìš”"
        },
        {
          id: "ch3-3",
          type: "quiz",
          title: "sortedì™€ ëŒë‹¤",
          content: `ë‹¤ìŒ ì½”ë“œì˜ ì¶œë ¥ ê²°ê³¼ëŠ”?
\`\`\`python
ìˆ«ìë“¤ = [(3, 'a'), (1, 'c'), (2, 'b')]
ì •ë ¬ = sorted(ìˆ«ìë“¤, key=lambda x: x[0])
print(ì •ë ¬)
\`\`\``,
          options: [
            "[(3, 'a'), (1, 'c'), (2, 'b')]",
            "[(1, 'c'), (2, 'b'), (3, 'a')]",
            "[('a', 3), ('b', 2), ('c', 1)]",
            "ì—ëŸ¬ ë°œìƒ"
          ],
          answer: 1,
          explanation: "x[0](ì²« ë²ˆì§¸ ìˆ«ì) ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬! 1, 2, 3 ìˆœì„œê°€ ë¼ìš”."
        },
        {
          id: "ch3-4",
          type: "mission",
          title: "ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬",
          task: "ë°ì´í„°ë¥¼ ë‘ ë²ˆì§¸ ìš”ì†Œ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•˜ì„¸ìš”",
          initialCode: `ë°ì´í„° = [('a', 3), ('b', 1), ('c', 2)]

# ë‘ ë²ˆì§¸ ìš”ì†Œ(x[1]) ê¸°ì¤€, ë‚´ë¦¼ì°¨ìˆœ
ì •ë ¬ = sorted(ë°ì´í„°, key=lambda x: x[1], reverse=True)
print(ì •ë ¬)`,
          expectedOutput: "[('a', 3), ('c', 2), ('b', 1)]",
          hint: "reverse=Trueë¥¼ ì¶”ê°€í•˜ë©´ ë‚´ë¦¼ì°¨ìˆœì´ì—ìš”"
        },
        {
          id: "ch3-5",
          type: "mission",
          title: "ğŸ† ë¬¸ìì—´ ê¸¸ì´ë¡œ ì •ë ¬",
          task: "ë‹¨ì–´ë“¤ì„ ê¸¸ì´ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ì„¸ìš”",
          initialCode: `ë‹¨ì–´ë“¤ = ['apple', 'hi', 'banana', 'cat']

# ê¸¸ì´(len(x)) ê¸°ì¤€ ì •ë ¬
ì •ë ¬ = # ì—¬ê¸°ì— ì½”ë“œ ì‘ì„±

print(ì •ë ¬)`,
          expectedOutput: "['hi', 'cat', 'apple', 'banana']",
          hint: "keyì— ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ìœ¼ì„¸ìš”",
          hint2: "len() í•¨ìˆ˜ë¥¼ lambdaë¡œ ê°ì‹¸ì„¸ìš”"
        }
      ]
    },
    // ============================================
    // Chapter 4: í•¨ìˆ˜ ì•ˆì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ
    // ============================================
    {
      id: "ch4",
      title: "í•¨ìˆ˜ ì•ˆì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ",
      emoji: "ğŸ”—",
      steps: [
        {
          id: "ch4-1",
          type: "explain",
          title: "í•¨ìˆ˜ê°€ í•¨ìˆ˜ë¥¼ ë¶€ë¥¸ë‹¤!",
          content: `## ğŸ”— í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì–´ìš”!

\`\`\`python
def ë”í•˜ê¸°(a, b):
    return a + b

def ê³±í•˜ê¸°(a, b):
    return a * b

def ê³„ì‚°(a, b):
    í•© = ë”í•˜ê¸°(a, b)    # ë”í•˜ê¸° í•¨ìˆ˜ í˜¸ì¶œ
    ê³± = ê³±í•˜ê¸°(a, b)    # ê³±í•˜ê¸° í•¨ìˆ˜ í˜¸ì¶œ
    return í•©, ê³±

í•©ê³„, ê³±ì…ˆ = ê³„ì‚°(3, 5)
print(f'í•©: {í•©ê³„}, ê³±: {ê³±ì…ˆ}')
# í•©: 8, ê³±: 15
\`\`\`

í° ë¬¸ì œë¥¼ ì‘ì€ í•¨ìˆ˜ë¡œ ë‚˜ëˆ ì„œ í•´ê²°í•  ìˆ˜ ìˆì–´ìš”!`
        },
        {
          id: "ch4-2",
          type: "tryit",
          title: "í•¨ìˆ˜ ì¡°í•©í•˜ê¸°",
          task: "í•¨ìˆ˜ ì•ˆì—ì„œ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë³´ì„¸ìš”",
          initialCode: `def ë”í•˜ê¸°(a, b):
    return a + b

def ê³±í•˜ê¸°(a, b):
    return a * b

def ê³„ì‚°(a, b):
    í•© = ë”í•˜ê¸°(a, b)
    ê³± = ê³±í•˜ê¸°(a, b)
    return í•©, ê³±

í•©ê³„, ê³±ì…ˆ = ê³„ì‚°(3, 5)
print(f'í•©: {í•©ê³„}, ê³±: {ê³±ì…ˆ}')`,
          expectedOutput: "í•©: 8, ê³±: 15",
          hint: "3+5=8, 3Ã—5=15"
        },
        {
          id: "ch4-3",
          type: "quiz",
          title: "ì¤‘ì²© í•¨ìˆ˜",
          content: `ë‹¤ìŒ ì½”ë“œì˜ ì¶œë ¥ ê²°ê³¼ëŠ”?
\`\`\`python
def outer():
    x = 10
    def inner():
        return x * 2
    return inner()

print(outer())
\`\`\``,
          options: [
            "10",
            "20",
            "ì—ëŸ¬ ë°œìƒ",
            "None"
          ],
          answer: 1,
          explanation: "inner í•¨ìˆ˜ëŠ” outer í•¨ìˆ˜ì˜ xë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”. 10 Ã— 2 = 20"
        },
        {
          id: "ch4-4",
          type: "mission",
          title: "ì˜¨ë„ ë³€í™˜ê¸°",
          task: "ì„­ì”¨â†’í™”ì”¨, í™”ì”¨â†’ì„­ì”¨ ë³€í™˜ í›„ ë‘˜ ë‹¤ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì™„ì„±í•˜ì„¸ìš”",
          initialCode: `def ì„­ì”¨toí™”ì”¨(c):
    return c * 9/5 + 32

def í™”ì”¨toì„­ì”¨(f):
    return (f - 32) * 5/9

def ì˜¨ë„ë³€í™˜(ì„­ì”¨):
    í™”ì”¨ = ì„­ì”¨toí™”ì”¨(ì„­ì”¨)
    ë‹¤ì‹œì„­ì”¨ = í™”ì”¨toì„­ì”¨(í™”ì”¨)
    # í™”ì”¨ì™€ ë‹¤ì‹œì„­ì”¨ ë‘˜ ë‹¤ ë°˜í™˜


f, c = ì˜¨ë„ë³€í™˜(100)
print(f'100Â°C = {f}Â°F')
print(f'{f}Â°F = {c}Â°C')`,
          expectedOutput: "100Â°C = 212.0Â°F\n212.0Â°F = 100.0Â°C",
          hint: "ë‘ ê°’ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì„œ ë°˜í™˜í•˜ì„¸ìš”",
          hint2: "returnì— ë³€ìˆ˜ ë‘ ê°œë¥¼ ë‚˜ì—´í•˜ë©´ ë¼ìš”"
        }
      ]
    }
  ]
}
